* Encoding
#+BEGIN_SRC emacs-lisp
(prefer-coding-system 'utf-8)
#+END_SRC

* Packages
** Melpa Initialization
#+BEGIN_SRC emacs-lisp
(require 'package)
(add-to-list 'package-archives
             '("melpa" . "https://melpa.org/packages/"))
(package-initialize)
#+END_SRC

** Auto-Download Use-Package
#+BEGIN_SRC emacs-lisp
  (unless (package-installed-p 'use-package)
    (package-refresh-contents)
    (package-install 'use-package))
#+END_SRC

** Which Key
#+BEGIN_SRC emacs-lisp
  (use-package which-key
    :ensure t
    :init
    (which-key-mode))
#+END_SRC

** Avy
#+BEGIN_SRC emacs-lisp
  (use-package avy
    :ensure t
    :bind
    ("M-s" . avy-goto-char))
#+END_SRC

** Browse Kill Ring
#+BEGIN_SRC emacs-lisp
  (use-package browse-kill-ring
    :ensure t
    :config
    (browse-kill-ring-default-keybindings))
#+END_SRC

* Theme
** Custom Theme
#+BEGIN_SRC emacs-lisp
  (set-foreground-color "burlywood3")
  (set-background-color "#161616")
  (set-cursor-color "#40FF40")

  (custom-set-faces
   '(show-paren-match ((t (:background "midnight blue"))))
   '(highlight ((t (:background "midnight blue"))))

   '(avy-lead-face-0    ((t (:background "DarkGoldenrod3" :foreground "black"))))
   '(avy-lead-face-1    ((t (:background "firebrick3" :foreground "black"))))
   '(avy-lead-face-2    ((t (:background "dark orange" :foreground "black"))))
   '(avy-lead-face      ((t (:background "olive drab" :foreground "black"))))

   '(org-level-1 ((t
		   (:height 1.3 :foreground "#FD971F" :inherit
			    (default)))))
   '(org-level-2 ((t
		   (:height 1.2 :foreground "#A6E22E" :inherit
			    (default)))))
   '(org-level-3 ((t
		   (:height 1.15 :foreground "#66D9EF" :inherit
			    (default)))))

   '(mode-line ((t (:box
		    (:line-width 1 :color "#64645E" :style unspecified)
		    :foreground "#F8F8F0" :background "#49483E"))))
   '(mode-line-inactive ((t (:box
			     (:line-width 1 :color "#64645E" :style unspecified)
			     :foreground "#75715E" :background "#272822"))))

   '(mode-line-buffer-id ((t (:weight bold :foreground "#A6E22E"))))
   '(mode-line-buffer-id-inactive ((t (:weight bold :foreground "#A6E22E"))))

   '(powerline-active0 ((t (:inherit
			    (mode-line)))))
   '(powerline-active1 ((t (:background "#35331D"))))
   '(powerline-active2 ((t (:background "#272822"))))

   '(powerline-inactive0 ((t (:inherit
			      (mode-line-inactive)))))
   '(powerline-inactive1 ((t (:background "#35331D"))))
   '(powerline-inactive2 ((t (:background "#272822"))))

   '(org-block-begin-line ((t (:foreground "white" :background "#35331D"))))
   '(org-block-end-line ((t (:foreground "white" :background "#35331D"))))

   '(compilation-mode-line-exit ((t (:weight bold :foreground "light green"))))
   '(compilation-mode-line-fail ((t (:weight bold :foreground "indian red"))))
   '(compilation-mode-line-run ((t (:weight bold :foreground "yellow"))))

   '(ido-first-match ((t (:weight normal :foreground "#E6DB74"))))
   '(ido-incomplete-regexp ((t (:weight bold :foreground "#F92672"))))
   '(ido-indicator ((t (:width condensed :foreground "#272822"
			       :background "#F92672"))))
   '(ido-only-match ((t (:weight normal :foreground "black"
				 :background "DarkGoldenrod3"))))
   '(ido-subdir ((t (:foreground "#66D9EF"))))
   '(ido-vertical-first-match-face ((t (:inherit (ido-first-match)))))
   '(ido-vertical-match-face ((t (:underline
				  (:color foreground-color :style line)
				  :bold t :inherit
				  (font-lock-variable-name-face)))))
   '(ido-vertical-only-match-face ((t (:inherit (ido-only-match)))))
   '(ido-virtual ((t (:foreground "#A1EFE4")))))


  (set-face-attribute 'font-lock-builtin-face nil :foreground "#DAB98F")
  (set-face-attribute 'font-lock-comment-face nil :foreground "gray50")
  (set-face-attribute 'font-lock-constant-face nil :foreground "olive drab")
  (set-face-attribute 'font-lock-doc-face nil :foreground "gray50")
  (set-face-attribute 'font-lock-function-name-face nil :foreground "burlywood3")
  (set-face-attribute 'font-lock-keyword-face nil :foreground "DarkGoldenrod3")
  (set-face-attribute 'font-lock-string-face nil :foreground "olive drab")
  (set-face-attribute 'font-lock-type-face nil :foreground "burlywood3")
  (set-face-attribute 'font-lock-variable-name-face nil :foreground "burlywood3")
  (set-face-attribute 'font-lock-variable-name-face nil :foreground "burlywood3")
  (set-face-attribute 'org-block nil :foreground "burlywood3"
		      :background "black")
  (set-face-attribute 'secondary-selection nil :background "black")


  (set-face-attribute 'isearch nil :background "DarkGoldenrod3" :foreground "black")
  (set-face-attribute 'lazy-highlight nil :background "midnight blue")
#+END_SRC

** Font
#+BEGIN_SRC emacs-lisp
  (if (eq system-type 'windows-nt)
      (add-to-list 'default-frame-alist '(font . "Consolas-14")))
  (if (eq system-type 'darwin)
      (add-to-list 'default-frame-alist '(font . "DejaVu Sans Mono-14")))
#+END_SRC

** Colors for Comments
#+BEGIN_SRC emacs-lisp
  (setq fixme-modes '(c++-mode c-mode emacs-lisp-mode))
  (make-face 'font-lock-fixme-face)
  (make-face 'font-lock-note-face)
  (mapc (lambda (mode)
	  (font-lock-add-keywords
	   mode
	   '(("\\<\\(TODO\\)" 1 'font-lock-fixme-face t)
	     ("\\<\\(NOTE\\)" 1 'font-lock-note-face t))))
	fixme-modes)
  (modify-face 'font-lock-fixme-face "firebrick2" nil nil t nil t nil nil)
  (modify-face 'font-lock-note-face "lime green" nil nil t nil t nil nil)
#+END_SRC

* Basic Settings
** Disable Yes or No Prompts
#+BEGIN_SRC emacs-lisp
(defalias 'yes-or-no-p 'y-or-n-p)
#+END_SRC

** Start Fullscreen
#+BEGIN_SRC emacs-lisp
(add-to-list 'default-frame-alist '(fullscreen . maximized))
#+END_SRC

** Scroll Line by Line
#+BEGIN_SRC emacs-lisp
(setq scroll-conservatively 100)
#+END_SRC

** Remove Bell Sound
#+BEGIN_SRC emacs-lisp
(setq ring-bell-function 'ignore)
#+END_SRC

** No Line Truncation
#+BEGIN_SRC emacs-lisp
(setq-default truncate-lines t)
#+END_SRC

** No Backup + Autosave
#+BEGIN_SRC emacs-lisp
(setq backup-inhibited t) 
(setq auto-save-default nil)
(setq create-lockfiles nil)
#+END_SRC

** Mac OSX Settings
#+BEGIN_SRC emacs-lisp 
  (if (eq system-type 'darwin)
      (setq mac-command-modifier 'meta)
    (setq mac-option-modifier 'super))
#+END_SRC

** Remove Scroll Bar, Menu Bar, Tool Bar, Startup Screen
#+BEGIN_SRC emacs-lisp
  (scroll-bar-mode -1) (menu-bar-mode -1) (tool-bar-mode 0)
#+END_SRC

** Subword
#+BEGIN_SRC emacs-lisp
(global-subword-mode 1)
#+END_SRC

** Transient Mark Mode Off
#+BEGIN_SRC emacs-lisp
(transient-mark-mode -1)
#+END_SRC

* Terminal
** Keybinding 
#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "<M-return>") 'eshell)
#+END_SRC

** Fixing Emacs Shell Clear Function
#+BEGIN_SRC emacs-lisp
  (defun rohan-eshell-clear ()
    "clear the eshell buffer"
    (interactive)
    (let ((inhibit-read-only t)) (erase-buffer)))

  (advice-add 'eshell/clear :override
	      'rohan-eshell-clear)
#+END_SRC

** Removing Greeting Message in Emacs Shell
#+BEGIN_SRC emacs-lisp
(setq eshell-banner-message "Welcome to Your Shell, Rohan\n")
#+END_SRC

** Changing Prompt Colors in Emacs Shell
#+BEGIN_SRC emacs-lisp
  (setq eshell-prompt-function
	(lambda () (concat
		    "\n"
		    (propertize "┌─["
				'face `(:foreground "green"))
		    (propertize (user-login-name)
				'face `(:foreground "DarkGoldenrod3"))
		    (propertize "]──["
				'face `(:foreground "green"))
		    (propertize (format-time-string "%H:%M" (current-time))
				'face `(:foreground "olive drab"))
		    (propertize "]──["
				'face `(:foreground "green"))
		    (propertize (concat (abbreviate-file-name(eshell/pwd))) 'face `(:foreground "white"))
		    (propertize "]\n"
				'face `(:foreground "green"))
		    (propertize "└─>"
				'face `(:foreground "green"))
		    (propertize (if (= (user-uid) 0) " # " " $ ")
				'face `(:foreground "green")))))

#+END_SRC

* IDO
** Enable IDO Mode
#+BEGIN_SRC emacs-lisp
  (setq ido-enable-flex-matching nil)
  (setq ido-create-new-buffer 'always)
  (setq ido-everywhere t)
  (ido-mode 1)
#+END_SRC

** IDO Vertical 
#+BEGIN_SRC emacs-lisp
  (use-package ido-vertical-mode
    :ensure t
    :init
    (ido-vertical-mode 1))
  (setq ido-vertical-define-keys 'C-n-and-C-p-only)
#+END_SRC

** SMEX
#+BEGIN_SRC emacs-lisp
  (use-package smex
    :ensure t
    :init
    (smex-initialize)
    :bind
    ("M-x" . smex))
#+END_SRC

** IDO for I-Menu
#+BEGIN_SRC emacs-lisp
  (defun ido-goto-symbol (&optional symbol-list)
    "Refresh imenu and jump to a place in the buffer using Ido."
    (interactive)
    (unless (featurep 'imenu)
      (require 'imenu nil t))
    (cond
     ((not symbol-list)
      (let ((ido-mode ido-mode)
	    (ido-enable-flex-matching
	     (if (boundp 'ido-enable-flex-matching)
		 ido-enable-flex-matching t))
	    name-and-pos symbol-names position)
	(unless ido-mode
	  (ido-mode 1)
	  (setq ido-enable-flex-matching t))
	(while (progn
		 (imenu--cleanup)
		 (setq imenu--index-alist nil)
		 (ido-goto-symbol (imenu--make-index-alist))
		 (setq selected-symbol
		       (ido-completing-read "Symbol? " symbol-names))
		 (string= (car imenu--rescan-item) selected-symbol)))
	(unless (and (boundp 'mark-active) mark-active)
	  (push-mark nil t nil))
	(setq position (cdr (assoc selected-symbol name-and-pos)))
	(cond
	 ((overlayp position)
	  (goto-char (overlay-start position)))
	 (t
	  (goto-char position)))))
     ((listp symbol-list)
      (dolist (symbol symbol-list)
	(let (name position)
	  (cond
	   ((and (listp symbol) (imenu--subalist-p symbol))
	    (ido-goto-symbol symbol))
	   ((listp symbol)
	    (setq name (car symbol))
	    (setq position (cdr symbol)))
	   ((stringp symbol)
	    (setq name symbol)
	    (setq position
		  (get-text-property 1 'org-imenu-marker symbol))))
	  (unless (or (null position) (null name)
		      (string= (car imenu--rescan-item) name))
	    (add-to-list 'symbol-names name)
	    (add-to-list 'name-and-pos (cons name position))))))))

  (global-set-key (kbd "M-j") 'ido-goto-symbol)
#+END_SRC

** Switch Buffer Keybind
#+BEGIN_SRC emacs-lisp
  (global-set-key (kbd "C-x C-b") 'ido-switch-buffer)
#+END_SRC

* Buffers
** Enable I-Buffer
#+BEGIN_SRC emacs-lisp
  (global-set-key (kbd "C-x b") 'ibuffer)
#+END_SRC

** I-Buffer Expert
#+BEGIN_SRC emacs-lisp
  (setq ibuffer-expert t)
#+END_SRC

* Window Splitting
** Split Horizontally
#+BEGIN_SRC emacs-lisp
(setq split-height-threshold nil)
(setq split-width-threshold 100)
#+END_SRC

* Open/Reload Config
** Open Config
#+BEGIN_SRC emacs-lisp
  (defun config-edit ()
    (interactive)
    (find-file (expand-file-name "~/.emacs.d/config.org")))
  (global-set-key (kbd "C-c e") 'config-edit)

(defun config-edit-other-window ()
    (interactive)
    (find-file-other-window (expand-file-name "~/.emacs.d/config.org")))
  (global-set-key (kbd "C-c E") 'config-edit-other-window)
#+END_SRC

** Reload Config
#+BEGIN_SRC emacs-lisp
  (defun config-reload ()
    (interactive)
    (org-babel-load-file
     (expand-file-name "~/.emacs.d/config.org")))
  (global-set-key (kbd "C-c r") 'config-reload)
#+END_SRC

* Org
** Org Bullets
#+BEGIN_SRC emacs-lisp
  (set-fontset-font t 'unicode "DejaVu Sans Mono" nil 'prepend)

  (use-package org-bullets
    :ensure t
    :config
    (add-hook 'org-mode-hook (lambda () (org-bullets-mode))))
#+END_SRC

** Source Snippet
#+BEGIN_SRC emacs-lisp
  (add-to-list 'org-structure-template-alist
	       '("el" "#+BEGIN_SRC emacs-lisp\n?\n#+END_SRC\n"))
#+END_SRC

* Find File/Buffer + Kill
** Find File and Buffer
#+BEGIN_SRC emacs-lisp
  (global-set-key (kbd "C-x F") 'find-file-other-window)
  (global-set-key (kbd "C-x B") 'ido-switch-buffer-other-window)
#+END_SRC

** Kill
#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C-x C-k") 'kill-this-buffer)

(defun other-window-kill-buffer ()
  (interactive)
  (let ((win-curr (selected-window))
        (win-other (next-window)))
    (select-window win-other)
    (kill-this-buffer)
    (select-window win-curr)))

(global-set-key (kbd "C-x K") 'other-window-kill-buffer)
#+END_SRC

* Convenient Function
** Kill Whole Word
#+BEGIN_SRC emacs-lisp
  (defun kill-whole-word ()
    (interactive)
    (backward-word)
    (kill-word 1))
  (global-set-key (kbd "C-c w") 'kill-whole-word)
#+END_SRC

** Copy Line
#+BEGIN_SRC emacs-lisp
  (defun copy-whole-line ()
    (interactive)
    (kill-new
     (buffer-substring
      (point-at-bol)
      (point-at-eol))))
  (global-set-key (kbd "C-c l") 'copy-whole-line)
#+END_SRC

** Join Line
#+BEGIN_SRC emacs-lisp
  (defun rohan-join-line ()
    (interactive)
    (let ((inhibit-message t))
      (save-excursion
	(next-line)
	(join-line))
      (indent-region (line-beginning-position) (line-end-position))))

  (global-set-key (kbd "C-c j") 'rohan-join-line)
#+END_SRC

* Abbrev
#+BEGIN_SRC emacs-lisp
  (setq dabbrev-case-replace t)
  (setq dabbrev-case-fold-search t)
  (setq dabbrev-upcase-means-case-search t)

  (define-key global-map "\t" 'dabbrev-expand)
  (define-key global-map [S-tab] 'indent-for-tab-command)
  (define-key global-map [C-tab] 'indent-region)
#+END_SRC

* Modeline
** Spaceline
#+BEGIN_SRC emacs-lisp
    (use-package spaceline
      :ensure t
      :config
      (require 'spaceline-config)
      (if (eq system-type 'darwin)
	  (setq powerline-image-apple-rgb t))
      (spaceline-spacemacs-theme)
      (spaceline-toggle-minor-modes-off)
      (spaceline-toggle-selection-info-off)
      (add-hook 'window-setup-hook (lambda () (powerline-reset))))
#+END_SRC

** Colored & Shortened VC
#+BEGIN_SRC emacs-lisp
  (make-face 'vc-green)
  (modify-face 'vc-green "light green" nil nil nil nil nil nil nil)

  (make-face 'vc-red)
  (modify-face 'vc-red "Red" nil nil nil nil nil nil nil)

  (make-face 'vc-yellow)
  (modify-face 'vc-yellow "Yellow" nil nil nil nil nil nil nil)

  (eval-after-load "vc-hooks"
    '(defadvice vc-mode-line (after sml/after-vc-mode-line-advice () activate)
       (when (stringp vc-mode)
	 (let ((noback (replace-regexp-in-string (format "^ %s" (vc-backend buffer-file-name)) " " vc-mode)))
	   (setq vc-mode
		 (propertize noback
			     'face (cond ((string-match "^ -" noback)    'vc-green)
					 ((string-match "^ [:@]" noback) 'vc-yellow)
					 ((string-match "^ [!\\?]" noback) 'vc-red))))))))
#+END_SRC

** Get Rid of Extra C++ Modeline Stuff
#+BEGIN_SRC emacs-lisp
(with-eval-after-load "cc-cmds"
  (defalias 'c-update-modeline #'ignore))
#+END_SRC

* Dashboard
#+BEGIN_SRC emacs-lisp
  (use-package dashboard
    :ensure t
    :config
    (dashboard-setup-startup-hook)
    (setq dashboard-items '((recents . 5)))
    (setq dashboard-banner-logo-title "Welcome Rohan!"))
#+END_SRC

